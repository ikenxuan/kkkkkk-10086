{{extend defaultLayout}} {{block 'css'}}
<script src="https://cdn.bootcdn.net/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<link rel="stylesheet" type="text/css" href="{{_res_path}}html/douyin/musicinfo.css" />
{{/block}} {{block 'main'}}

<div class="spacer1"></div>
<div class="bitop">
  <img src="https://p3-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/logo-horizontal.svg" alt="Logo" />
  &nbsp;&nbsp;&nbsp;&nbsp;
  <span style="font-size: 50px">|</span>
  &nbsp;&nbsp;&nbsp;&nbsp;抖音 记录美好生活
</div>
<div class="spacer2"></div>
<div class="cover">
  <div class="imgbox">
    <img class="imgbox_1" src="{{image_url}}" alt="封面" />
  </div>
</div>
<div class="spacer3"></div>
<div class="info">
  <div class="info_text">
    <div class="shipinbiaoti">TITLE OF MUSIC</div>
    {{@desc}}
  </div>
  <div class="spacer4"></div>
  <div class="info_text" style="font-size: 30px; color: #808080">音乐ID: {{music_id}}</div>
  <div class="info_text" style="font-size: 30px; color: #808080">{{user_count}} 人使用过</div>
  <div class="spacer5"></div>
  <div class="background-square">
    <div class="info_text" style="font-size: 25px; padding: 0 12px; white-space: nowrap; color: #bcbcbc">图片生成于{{create_time}}</div>
  </div>
</div>
<div class="spacer6"></div>
<div class="other_text">抖音音乐信息</div>
<div class="under">
  <div class="rectangular_box">
    <div class="user" style="align-items: center">
      <div class="userinfo">
        <div><img src="{{avater_url}}" alt="头像" class="avatar" /></div>
        <div class="name_and_followers">
          <div class="qrcode_text"></div>
          <span style="font-weight: bolder; color: #606060; font-size: 50px">{{username}}</span>
        </div>
      </div>
      <div class="userinfo_text">
        <span>ID: {{user_shortid}}</span>
        <span>获赞: {{total_favorited}}</span>
        <span>关注: {{following_count}}</span>
        <span>粉丝: {{fans}}</span>
      </div>
    </div>
    <div class="qrcode_box">
      <div class="qrcode_text" style="font-size: 23px">文件直链：永久有效</div>
      <div id="qrcode"></div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var infoTexts = document.querySelectorAll('.info_text')
    infoTexts.forEach(function (infoText) {
      // 计算文本宽度
      var range = document.createRange()
      range.selectNode(infoText)
      var textWidth = range.getBoundingClientRect().width + 12
      // 找到 .info_text 元素的父级元素 .background-square，并设置宽度
      var backgroundSquare = infoText.parentNode
      backgroundSquare.style.width = textWidth + 'px'
      backgroundSquare.style.display = 'inline-block' // 确保 .background-square 作为行内块级元素显示
    })
  })
</script>
<script>
  qrcode = new QRCode(document.getElementById('qrcode'), {
    width: 500,
    height: 500,
    colorDark: '#808080',
    colorLight: '#ECECEC',
  })
  qrcode.makeCode('{{share_url}}')
</script>
{{/block}}
